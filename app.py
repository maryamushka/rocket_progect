from flask import Flask, render_template, jsonify, request, session, send_file
from datetime import datetime
import os
import uuid

app = Flask(__name__)
app.secret_key = 'rocket_secret_key_for_kids_2023'

# –ú–ò–°–°–ò–ò
ALL_MISSIONS = [
    {
        "id": 1,
        "name": "Starship IFT-4",
        "date": "15 –¥–µ–∫–∞–±—Ä—è 2023",
        "time": "15:00 –ú–°–ö",
        "rocket": "Starship",
        "company": "SpaceX",
        "status": "–ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–π",
        "description": "–ß–µ—Ç–≤—ë—Ä—Ç—ã–π –∏—Å–ø—ã—Ç–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ–ª—ë—Ç —Å–∞–º–æ–π –±–æ–ª—å—à–æ–π —Ä–∞–∫–µ—Ç—ã –≤ –∏—Å—Ç–æ—Ä–∏–∏ —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞!",
        "fun_fact": "üöÄ –í—ã—Å–æ—Ç–∞ Starship - 120 –º–µ—Ç—Ä–æ–≤, —ç—Ç–æ –∫–∞–∫ 40-—ç—Ç–∞–∂–Ω—ã–π –¥–æ–º! üè¢ –†–∞–∫–µ—Ç–∞ –º–æ–∂–µ—Ç –ø–æ–¥–Ω—è—Ç—å –Ω–∞ –æ—Ä–±–∏—Ç—É –≤–µ—Å 150 –≤–∑—Ä–æ—Å–ª—ã—Ö —Å–ª–æ–Ω–æ–≤! üêò",
        "importance": "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –º–Ω–æ–≥–æ—Ä–∞–∑–æ–≤–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–ª—è –±—É–¥—É—â–∏—Ö –ø–æ–ª—ë—Ç–æ–≤ –Ω–∞ –ú–∞—Ä—Å",
        "image": "starship.png",
        "video": "https://www.youtube.com/embed/",
        "emoji": "üöÄ",
        "difficulty": "—Å–ª–æ–∂–Ω—ã–π",
        "kid_facts": [
            "üéÆ –ò–≥—Ä–æ–≤–∞—è –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –±–æ—Ä—Ç—É: –∫–æ—Å–º–æ–Ω–∞–≤—Ç—ã –º–æ–≥—É—Ç –∏–≥—Ä–∞—Ç—å –≤ –∏–≥—Ä—ã –≤ –Ω–µ–≤–µ—Å–æ–º–æ—Å—Ç–∏!",
            "ü¶∏‚Äç‚ôÇÔ∏è –°—É–ø–µ—Ä-—Å–∏–ª–∞: —Ä–∞–∫–µ—Ç–∞ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å 27 000 –∫–º/—á - –±—ã—Å—Ç—Ä–µ–µ –ø—É–ª–∏!",
            "üçï –ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –µ–¥–∞: –Ω–∞ –±–æ—Ä—Ç—É –µ—Å—Ç—å –ø–∏—Ü—Ü–∞, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –µ—Å—Ç—å –±–µ–∑ –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–∏!",
            "üëΩ –ù–∞ –ú–∞—Ä—Å?: —ç—Ç–∞ —Ä–∞–∫–µ—Ç–∞ –≥–æ—Ç–æ–≤–∏—Ç—Å—è –∫ –ø–æ–ª—ë—Ç—É –Ω–∞ –ö—Ä–∞—Å–Ω—É—é –ø–ª–∞–Ω–µ—Ç—É!",
            "üîÅ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è: –∫–∞–∫ –±—É–º–µ—Ä–∞–Ω–≥ - –ø–µ—Ä–≤–∞—è —Å—Ç—É–ø–µ–Ω—å –ø—Ä–∏–∑–µ–º–ª—è–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ!"
        ]
    },
    {
        "id": 2,
        "name": "–õ—É–Ω–∞-25",
        "date": "10 –∞–≤–≥—É—Å—Ç–∞ 2023",
        "time": "11:10 –ú–°–ö",
        "rocket": "–°–æ—é–∑-2.1–±",
        "company": "–†–æ—Å–∫–æ—Å–º–æ—Å",
        "status": "–∑–∞–≤–µ—Ä—à—ë–Ω",
        "description": "–ü–µ—Ä–≤–∞—è —Ä–æ—Å—Å–∏–π—Å–∫–∞—è –ª—É–Ω–Ω–∞—è –º–∏—Å—Å–∏—è –∑–∞ 46 –ª–µ—Ç! –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –Æ–∂–Ω–æ–≥–æ –ø–æ–ª—é—Å–∞ –õ—É–Ω—ã.",
        "fun_fact": "üåô –ò—â–µ—Ç –≤–æ–¥—è–Ω–æ–π –ª—ë–¥, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∑–∞–ø—Ä–∞–≤–∫–∏ —Ä–∞–∫–µ—Ç! ‚ùÑÔ∏è –ù–∞ –õ—É–Ω–µ –µ—Å—Ç—å –≤–æ–¥–∞ –≤ –≤–∏–¥–µ –ª—å–¥–∞ - –∫–∞–∫ –≤ –º–æ—Ä–æ–∑–∏–ª–∫–µ!",
        "importance": "–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Å–æ–∑–¥–∞–Ω–∏—é —Ä–æ—Å—Å–∏–π—Å–∫–æ–π –ª—É–Ω–Ω–æ–π –±–∞–∑—ã",
        "image": "sojuz.png",
        "video": "https://www.youtube.com/embed/",
        "emoji": "üõ∞Ô∏è",
        "difficulty": "—Å—Ä–µ–¥–Ω–∏–π",
        "kid_facts": [
            "üèóÔ∏è –°—Ç—Ä–æ–∏—Ç–µ–ª—å: –≥–æ—Ç–æ–≤–∏—Ç –º–µ—Å—Ç–æ –¥–ª—è –ª—É–Ω–Ω–æ–π –±–∞–∑—ã, –∫–∞–∫ –∫–æ—Å–º–∏—á–µ—Å–∫–∏–π —Å—Ç—Ä–æ–∏—Ç–µ–ª—å!",
            "üîç –î–µ—Ç–µ–∫—Ç–∏–≤ –ª—å–¥–∞: –∏—â–µ—Ç —Å–∫—Ä—ã—Ç—ã–µ –ª–µ–¥—è–Ω—ã–µ –ø–µ—â–µ—Ä—ã –Ω–∞ –õ—É–Ω–µ!",
            "üì∏ –§–æ—Ç–æ–æ—Ö–æ—Ç–Ω–∏–∫: —Å–¥–µ–ª–∞–ª —Å–µ–ª—Ñ–∏ —Å –õ—É–Ω–æ–π –Ω–∞ –∑–∞–¥–Ω–µ–º –ø–ª–∞–Ω–µ!",
            "‚õèÔ∏è –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –≥–µ–æ–ª–æ–≥: —Å–æ–±–∏—Ä–∞–µ—Ç –ª—É–Ω–Ω—ã–µ –∫–∞–º–Ω–∏ –¥–ª—è —É—á—ë–Ω—ã—Ö!",
            "üå°Ô∏è –¢–µ—Ä–º–æ–º–µ—Ç—Ä: –∏–∑–º–µ—Ä—è–µ—Ç —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –æ—Ç -173¬∞C –¥–æ +127¬∞C!"
        ]
    },
    {
        "id": 3,
        "name": "James Webb",
        "date": "25 –¥–µ–∫–∞–±—Ä—è 2021",
        "time": "15:20 –ú–°–ö",
        "rocket": "Ariane 5",
        "company": "NASA/ESA",
        "status": "–∑–∞–≤–µ—Ä—à—ë–Ω",
        "description": "–ó–∞–ø—É—Å–∫ —Å–∞–º–æ–≥–æ –º–æ—â–Ω–æ–≥–æ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ–ª–µ—Å–∫–æ–ø–∞ –≤ –∏—Å—Ç–æ—Ä–∏–∏!",
        "fun_fact": "üî≠ –ú–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å –≥–∞–ª–∞–∫—Ç–∏–∫–∏, —Å–≤–µ—Ç –æ—Ç –∫–æ—Ç–æ—Ä—ã—Ö —à—ë–ª –¥–æ –Ω–∞—Å 13.5 –º–∏–ª–ª–∏–∞—Ä–¥–æ–≤ –ª–µ—Ç! ‚è≥ –û–Ω –≤–∏–¥–∏—Ç –ø—Ä–æ—à–ª–æ–µ –í—Å–µ–ª–µ–Ω–Ω–æ–π!",
        "importance": "–ò–∑—É—á–µ–Ω–∏–µ –ø–µ—Ä–≤—ã—Ö –∑–≤—ë–∑–¥ –∏ –≥–∞–ª–∞–∫—Ç–∏–∫ –í—Å–µ–ª–µ–Ω–Ω–æ–π",
        "image": "payload.png",
        "video": "https://www.youtube.com/embed/",
        "emoji": "üåå",
        "difficulty": "–ø—Ä–æ—Å—Ç–æ–π",
        "kid_facts": [
            "üîç –°—É–ø–µ—Ä-–∑—Ä–µ–Ω–∏–µ: –º–æ–∂–µ—Ç —É–≤–∏–¥–µ—Ç—å –ø—á–µ–ª—É –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ 380 000 –∫–º! üêù",
            "üõ°Ô∏è –°–æ–ª–Ω—Ü–µ–∑–∞—â–∏—Ç–∫–∞: –∏–º–µ–µ—Ç —â–∏—Ç —Ä–∞–∑–º–µ—Ä–æ–º —Å —Ç–µ–Ω–Ω–∏—Å–Ω—ã–π –∫–æ—Ä—Ç! üéæ",
            "‚ùÑÔ∏è –ú–æ—Ä–æ–∑–∏–ª—å–Ω–∏–∫: —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ -223¬∞C - —Ö–æ–ª–æ–¥–Ω–µ–µ, —á–µ–º –Ω–∞ –ü–ª—É—Ç–æ–Ω–µ!",
            "üß© –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: –≤ –∫–æ—Å–º–æ—Å–µ —Å–∞–º —Å–æ–±—Ä–∞–ª—Å—è –∏–∑ 18 –∑–µ—Ä–∫–∞–ª!",
            "üì∏ –§–æ—Ç–æ–≥—Ä–∞—Ñ: –¥–µ–ª–∞–µ—Ç —Ñ–æ—Ç–æ –∑–≤—ë–∑–¥, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –ø–æ–≥–∞—Å–ª–∏!"
        ]
    },
    {
        "id": 4,
        "name": "Crew-7 –∫ –ú–ö–°",
        "date": "26 –∞–≤–≥—É—Å—Ç–∞ 2023",
        "time": "10:27 –ú–°–ö",
        "rocket": "Falcon 9",
        "company": "SpaceX",
        "status": "–∑–∞–≤–µ—Ä—à—ë–Ω",
        "description": "–î–æ—Å—Ç–∞–≤–∫–∞ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–≥–æ —ç–∫–∏–ø–∞–∂–∞ –Ω–∞ –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—É—é –∫–æ—Å–º–∏—á–µ—Å–∫—É—é —Å—Ç–∞–Ω—Ü–∏—é",
        "fun_fact": "üë®‚ÄçüöÄ –ù–∞ –±–æ—Ä—Ç—É –±—ã–ª–∏ –∫–æ—Å–º–æ–Ω–∞–≤—Ç—ã –∏–∑ –°–®–ê, –†–æ—Å—Å–∏–∏, –Ø–ø–æ–Ω–∏–∏ –∏ –î–∞–Ω–∏–∏! üåç –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –¥—Ä—É–∂–Ω—ã–π —ç–∫–∏–ø–∞–∂!",
        "importance": "–ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ú–ö–° –∏ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–µ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ",
        "image": "falcon9.png",
        "video": "https://www.youtube.com/embed/",
        "emoji": "üë®‚ÄçüöÄ",
        "difficulty": "—Å—Ä–µ–¥–Ω–∏–π",
        "kid_facts": [
            "üé™ –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π —Ü–∏—Ä–∫: –≤ –Ω–µ–≤–µ—Å–æ–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Å–∞–ª—å—Ç–æ –±–µ–∑ —É—Å–∏–ª–∏–π!",
            "üç™ –ü–µ—á–µ–Ω—å–µ –≤ –∫–æ—Å–º–æ—Å–µ: –ø–µ–∫—É—Ç –ø–µ—á–µ–Ω—å–µ –Ω–∞ –±–æ—Ä—Ç—É –ú–ö–°! üç™",
            "üíß –í–æ–¥—è–Ω—ã–µ —à–∞—Ä–∏–∫–∏: –≤–æ–¥–∞ –≤ –∫–æ—Å–º–æ—Å–µ –æ–±—Ä–∞–∑—É–µ—Ç –∏–¥–µ–∞–ª—å–Ω—ã–µ —à–∞—Ä–∏–∫–∏!",
            "üåç –û–±–∑–æ—Ä: –≤–∏–¥—è—Ç 16 –≤–æ—Å—Ö–æ–¥–æ–≤ —Å–æ–ª–Ω—Ü–∞ –≤ —Å—É—Ç–∫–∏! ‚òÄÔ∏è",
            "üßë‚Äçü§ù‚Äçüßë –î—Ä—É–∂–±–∞: –∫–æ—Å–º–æ–Ω–∞–≤—Ç—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –ª—É—á—à–∏–º–∏ –¥—Ä—É–∑—å—è–º–∏!"
        ]
    },
    {
        "id": 5,
        "name": "–ß–∞–Ω–¥—Ä–∞—è–Ω-3 (–ò–Ω–¥–∏—è)",
        "date": "14 –∏—é–ª—è 2023",
        "time": "14:35 –ú–°–ö",
        "rocket": "GSLV Mk III",
        "company": "ISRO",
        "status": "–∑–∞–≤–µ—Ä—à—ë–Ω",
        "description": "–ò–Ω–¥–∏–π—Å–∫–∞—è –º–∏—Å—Å–∏—è –ø–æ –ø–æ—Å–∞–¥–∫–µ –Ω–∞ –Æ–∂–Ω—ã–π –ø–æ–ª—é—Å –õ—É–Ω—ã",
        "fun_fact": "üáÆüá≥ –ò–Ω–¥–∏—è —Å—Ç–∞–ª–∞ —á–µ—Ç–≤—ë—Ä—Ç–æ–π —Å—Ç—Ä–∞–Ω–æ–π, –º—è–≥–∫–æ –ø–æ—Å–∞–¥–∏–≤—à–µ–π –∞–ø–ø–∞—Ä–∞—Ç –Ω–∞ –õ—É–Ω—É! üéñÔ∏è –ù–æ–≤—ã–π –∫–æ—Å–º–∏—á–µ—Å–∫–∏–π —á–µ–º–ø–∏–æ–Ω!",
        "importance": "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ª—É–Ω–Ω—ã—Ö –º–∏–Ω–µ—Ä–∞–ª–æ–≤ –∏ –≥–µ–æ–ª–æ–≥–∏–∏",
        "image": "tank.png",
        "video": "https://www.youtube.com/embed/",
        "emoji": "üåï",
        "difficulty": "—Å–ª–æ–∂–Ω—ã–π",
        "kid_facts": [
            "üèéÔ∏è –õ—É–Ω–æ—Ö–æ–¥-–≥–æ–Ω—â–∏–∫: –µ–∑–¥–∏–ª –ø–æ –õ—É–Ω–µ —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é 1 —Å–º/—Å–µ–∫!",
            "üì° –ê–Ω—Ç–µ–Ω–Ω–∞-—Ü–≤–µ—Ç–æ–∫: —Å–≤—è–∑—å —á–µ—Ä–µ–∑ –∞–Ω—Ç–µ–Ω–Ω—É –≤ —Ñ–æ—Ä–º–µ —Ü–≤–µ—Ç–∫–∞! üå∏",
            "üáÆüá≥ –ì–æ—Ä–¥–æ—Å—Ç—å –ò–Ω–¥–∏–∏: –Ω–∞ –õ—É–Ω–µ –µ—Å—Ç—å –∏–Ω–¥–∏–π—Å–∫–∏–π —Ñ–ª–∞–≥!",
            "üîã –°–æ–ª–Ω–µ—á–Ω–∞—è –±–∞—Ç–∞—Ä–µ—è: –ø–∏—Ç–∞–µ—Ç—Å—è –æ—Ç —Å–æ–ª–Ω–µ—á–Ω–æ–≥–æ —Å–≤–µ—Ç–∞! ‚òÄÔ∏è",
            "üß≠ –ù–∞–≤–∏–≥–∞—Ç–æ—Ä: —Å–∞–º –Ω–∞—Ö–æ–¥–∏—Ç –¥–æ—Ä–æ–≥—É –Ω–∞ —á—É–∂–æ–π –ø–ª–∞–Ω–µ—Ç–µ!"
        ]
    },
    {
        "id": 6,
        "name": "–ü—Ä–æ–≥—Ä–µ—Å—Å –ú–°-25",
        "date": "1 –¥–µ–∫–∞–±—Ä—è 2023",
        "time": "12:00 –ú–°–ö",
        "rocket": "–°–æ—é–∑-2.1–∞",
        "company": "–†–æ—Å–∫–æ—Å–º–æ—Å",
        "status": "–ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–π",
        "description": "–ì—Ä—É–∑–æ–≤–æ–π –∫–æ—Ä–∞–±–ª—å —Å –ø—Ä–∏–ø–∞—Å–∞–º–∏ –¥–ª—è –∫–æ—Å–º–æ–Ω–∞–≤—Ç–æ–≤ –Ω–∞ –ú–ö–°",
        "fun_fact": "üì¶ –í–µ–∑—É—Ç 2.5 —Ç–æ–Ω–Ω—ã –≥—Ä—É–∑–∞: –µ–¥—É, –≤–æ–¥—É, –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∏ –¥–∞–∂–µ –Ω–æ–≤–æ–≥–æ–¥–Ω–∏–µ –ø–æ–¥–∞—Ä–∫–∏! üéÅ –†–æ–∂–¥–µ—Å—Ç–≤–µ–Ω—Å–∫–∏–π —Å—é—Ä–ø—Ä–∏–∑ –≤ –∫–æ—Å–º–æ—Å–µ!",
        "importance": "–û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–æ—Å–º–æ–Ω–∞–≤—Ç–æ–≤",
        "image": "sojuz.png",
        "video": "https://www.youtube.com/embed/",
        "emoji": "üì¶",
        "difficulty": "–ø—Ä–æ—Å—Ç–æ–π",
        "kid_facts": [
            "üöö –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –≥—Ä—É–∑–æ–≤–∏–∫: –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–∏—Ü—Ü—É –∏ –º–æ—Ä–æ–∂–µ–Ω–æ–µ –Ω–∞ –æ—Ä–±–∏—Ç—É! üç¶",
            "üì¨ –ü–æ—á—Ç–∞–ª—å–æ–Ω: –≤–µ–∑—ë—Ç –ø–∏—Å—å–º–∞ –æ—Ç —Å–µ–º–µ–π –∫–æ—Å–º–æ–Ω–∞–≤—Ç–æ–≤! üíå",
            "üéÑ –ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –¥–µ–¥: –ø—Ä–∏–≤–æ–∑–∏—Ç —ë–ª–æ—á–Ω—ã–µ –∏–≥—Ä—É—à–∫–∏ –Ω–∞ –ú–ö–°!",
            "‚ö° –ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞: –¥–æ–ª–µ—Ç–∞–µ—Ç –∑–∞ 6 —á–∞—Å–æ–≤ - –±—ã—Å—Ç—Ä–µ–µ –ø–∏—Ü—Ü—ã!",
            "üîÑ –ê–≤—Ç–æ–ø–∏–ª–æ—Ç: —Å–∞–º –ø—Ä–∏—Å—Ç—ã–∫–æ–≤—ã–≤–∞–µ—Ç—Å—è –∫ —Å—Ç–∞–Ω—Ü–∏–∏!"
        ]
    },
    {
        "id": 7,
        "name": "Starlink Group 6-32",
        "date": "5 –¥–µ–∫–∞–±—Ä—è 2023",
        "time": "22:00 –ú–°–ö",
        "rocket": "Falcon 9",
        "company": "SpaceX",
        "status": "–ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–π",
        "description": "–ó–∞–ø—É—Å–∫ 23 —Å–ø—É—Ç–Ω–∏–∫–æ–≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–≤—è–∑–∏ Starlink",
        "fun_fact": "üõ∞Ô∏è –ö–∞–∂–¥—ã–π —Å–ø—É—Ç–Ω–∏–∫ –≤–µ—Å–∏—Ç 260 –∫–≥ –∏ –ª–µ—Ç–∞–µ—Ç –Ω–∞ –≤—ã—Å–æ—Ç–µ 550 –∫–º! üì° –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –∏–∑ –∫–æ—Å–º–æ—Å–∞!",
        "importance": "–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞",
        "image": "falcon9.png",
        "video": "https://www.youtube.com/embed/",
        "emoji": "üì°",
        "difficulty": "–ø—Ä–æ—Å—Ç–æ–π",
        "kid_facts": [
            "üï∏Ô∏è –ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –ø–∞—É—Ç–∏–Ω–∞: —Å–ø—É—Ç–Ω–∏–∫–∏ –∫–∞–∫ –ø–∞—É—á–∫–∏ –ø–ª–µ—Ç—É—Ç —Å–µ—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞!",
            "üí´ –°–æ–∑–≤–µ–∑–¥–∏–µ: –æ–±—Ä–∞–∑—É—é—Ç –Ω–∞ –Ω–µ–±–µ –¥–≤–∏–∂—É—â–∏–µ—Å—è –∑–≤—ë–∑–¥—ã!",
            "üõ°Ô∏è –ó–∞—â–∏—Ç–Ω–∏–∫–∏: –∫–∞–∂–¥—ã–π –∏–º–µ–µ—Ç —â–∏—Ç –æ—Ç —Å–æ–ª–Ω—Ü–∞! ‚òÄÔ∏è",
            "üîã –°–æ–ª–Ω–µ—á–Ω—ã–µ –∫—Ä—ã–ª—å—è: –ø–∏—Ç–∞—é—Ç—Å—è –æ—Ç —Å–æ–ª–Ω–µ—á–Ω—ã—Ö –ø–∞–Ω–µ–ª–µ–π!",
            "üöÄ –ü–æ–µ–∑–¥ –≤ –Ω–µ–±–µ: –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ª–µ—Ç—è—Ç —Ü–µ–ø–æ—á–∫–æ–π –∫–∞–∫ –ø–æ–µ–∑–¥!"
        ]
    },
    {
        "id": 8,
        "name": "Artemis I (–û—Ä–∏–æ–Ω)",
        "date": "16 –Ω–æ—è–±—Ä—è 2022",
        "time": "09:47 –ú–°–ö",
        "rocket": "SLS",
        "company": "NASA",
        "status": "–∑–∞–≤–µ—Ä—à—ë–Ω",
        "description": "–ü–µ—Ä–≤—ã–π –∏—Å–ø—ã—Ç–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ–ª—ë—Ç –Ω–æ–≤–æ–π –ª—É–Ω–Ω–æ–π —Ä–∞–∫–µ—Ç—ã NASA",
        "fun_fact": "üåí –†–∞–∫–µ—Ç–∞ –æ–±–ª–µ—Ç–µ–ª–∞ –õ—É–Ω—É –∏ –≤–µ—Ä–Ω—É–ª–∞—Å—å –Ω–∞ –ó–µ–º–ª—é —á–µ—Ä–µ–∑ 25 –¥–Ω–µ–π! ‚è±Ô∏è –†–µ–∫–æ—Ä–¥–Ω—ã–π –ø–æ–ª—ë—Ç!",
        "importance": "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –¥–ª—è –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è –ª—é–¥–µ–π –Ω–∞ –õ—É–Ω—É",
        "image": "engine.png",
        "video": "https://www.youtube.com/embed/",
        "emoji": "üåí",
        "difficulty": "—Å–ª–æ–∂–Ω—ã–π",
        "kid_facts": [
            "üß∏ –ü–∞—Å—Å–∞–∂–∏—Ä—ã: –Ω–∞ –±–æ—Ä—Ç—É –±—ã–ª–∏ –ø–ª—é—à–µ–≤—ã–µ –∏–≥—Ä—É—à–∫–∏ - –°–Ω—É–ø–∏ –∏ –®–∞—Ä–∏–∫! üêë",
            "üåô –õ—É–Ω–Ω—ã–π —Ç–∞–Ω–µ—Ü: –æ–±–ª–µ—Ç–µ–ª –õ—É–Ω—É –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ 130 –∫–º!",
            "üî• –°–∞–º—ã–π –º–æ—â–Ω—ã–π: –¥–≤–∏–≥–∞—Ç–µ–ª–∏ –∫–∞–∫ 40 —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–∞–º–æ–ª—ë—Ç–æ–≤! ‚úàÔ∏è",
            "üëª –ü—Ä–∏–≤–∏–¥–µ–Ω–∏–µ: –Ω–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ –õ—É–Ω—ã –Ω–µ—Ç —Å–≤—è–∑–∏ —Å –ó–µ–º–ª–µ–π!",
            "üìä –†–µ–∫–æ—Ä–¥—Å–º–µ–Ω: –ø–æ–±–∏–ª —Ä–µ–∫–æ—Ä–¥ –¥–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–ª—ë—Ç–∞!"
        ]
    },
    {
        "id": 9,
        "name": "Juice –∫ –Æ–ø–∏—Ç–µ—Ä—É",
        "date": "14 –∞–ø—Ä–µ–ª—è 2023",
        "time": "14:15 –ú–°–ö",
        "rocket": "Ariane 5",
        "company": "ESA",
        "status": "–∑–∞–≤–µ—Ä—à—ë–Ω",
        "description": "–ú–∏—Å—Å–∏—è –∫ –ª–µ–¥—è–Ω—ã–º —Å–ø—É—Ç–Ω–∏–∫–∞–º –Æ–ø–∏—Ç–µ—Ä–∞",
        "fun_fact": "ü™ê –õ–µ—Ç–∏—Ç –∫ –Æ–ø–∏—Ç–µ—Ä—É 8 –ª–µ—Ç! –£–≤–∏–¥–∏—Ç –ø–ª–∞–Ω–µ—Ç—É —Ç–æ–ª—å–∫–æ –≤ 2031! üóìÔ∏è –î–æ–ª–≥–æ–µ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ!",
        "importance": "–ò–∑—É—á–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∂–∏–∑–Ω–∏ –Ω–∞ —Å–ø—É—Ç–Ω–∏–∫–∞—Ö –Æ–ø–∏—Ç–µ—Ä–∞",
        "image": "payload.png",
        "video": "https://www.youtube.com/embed/",
        "emoji": "ü™ê",
        "difficulty": "—Å–ª–æ–∂–Ω—ã–π",
        "kid_facts": [
            "üöó –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫: –ø—Ä–æ–µ–¥–µ—Ç 6 –º–∏–ª–ª–∏–∞—Ä–¥–æ–≤ –∫–º!",
            "üßä –õ–µ–¥—è–Ω—ã–µ –º–∏—Ä—ã: –∏—Å—Å–ª–µ–¥—É–µ—Ç –ï–≤—Ä–æ–ø—É, –ì–∞–Ω–∏–º–µ–¥ –∏ –ö–∞–ª–ª–∏—Å—Ç–æ!",
            "üîç –û—Ö–æ—Ç–Ω–∏–∫ –∑–∞ –∂–∏–∑–Ω—å—é: –∏—â–µ—Ç –ø—Ä–∏–∑–Ω–∞–∫–∏ –∂–∏–∑–Ω–∏ –ø–æ–¥ –ª—å–¥–æ–º!",
            "‚òÄÔ∏è –°–æ–ª–Ω–µ—á–Ω—ã–µ –±–∞—Ç–∞—Ä–µ–∏: —Å–∞–º—ã–µ –±–æ–ª—å—à–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏–∏ –º–∏—Å—Å–∏–π!",
            "üì° –ê–Ω—Ç–µ–Ω–Ω–∞-–±–ª—é–¥—Ü–µ: –æ–≥—Ä–æ–º–Ω–∞—è –∞–Ω—Ç–µ–Ω–Ω–∞ –¥–ª—è —Å–≤—è–∑–∏ —Å –ó–µ–º–ª—ë–π!"
        ]
    },
    {
        "id": 10,
        "name": "Psyche –∫ –∞—Å—Ç–µ—Ä–æ–∏–¥—É",
        "date": "13 –æ–∫—Ç—è–±—Ä—è 2023",
        "time": "17:19 –ú–°–ö",
        "rocket": "Falcon Heavy",
        "company": "NASA",
        "status": "–∑–∞–≤–µ—Ä—à—ë–Ω",
        "description": "–ú–∏—Å—Å–∏—è –∫ –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–æ–º—É –∞—Å—Ç–µ—Ä–æ–∏–¥—É –ü—Å–∏—Ö–µ—è",
        "fun_fact": "üíé –ê—Å—Ç–µ—Ä–æ–∏–¥ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –∂–µ–ª–µ–∑–∞ –∏ –Ω–∏–∫–µ–ª—è - –∫–∞–∫ –≥–∏–≥–∞–Ω—Ç—Å–∫–æ–µ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–µ —Å–æ–∫—Ä–æ–≤–∏—â–µ! üèÜ –¶–µ–Ω–Ω—ã–π –∫–æ—Å–º–∏—á–µ—Å–∫–∏–π –æ–±—ä–µ–∫—Ç!",
        "importance": "–ò–∑—É—á–µ–Ω–∏–µ —è–¥—Ä–∞ –ø—Ä–æ—Ç–æ–ø–ª–∞–Ω–µ—Ç—ã",
        "image": "falcon9.png",
        "video": "https://www.youtube.com/embed/",
        "emoji": "üíé",
        "difficulty": "—Å—Ä–µ–¥–Ω–∏–π",
        "kid_facts": [
            "üí∞ –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–ª–∞–¥: –∞—Å—Ç–µ—Ä–æ–∏–¥ —Å—Ç–æ–∏—Ç 10 –∫–≤–∏–Ω—Ç–∏–ª–ª–∏–æ–Ω–æ–≤ –¥–æ–ª–ª–∞—Ä–æ–≤!",
            "üß≤ –ú–∞–≥–Ω–∏—Ç–Ω–æ–µ –ø–æ–ª–µ: —É –∞—Å—Ç–µ—Ä–æ–∏–¥–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤–æ—ë –º–∞–≥–Ω–∏—Ç–Ω–æ–µ –ø–æ–ª–µ!",
            "üöÄ –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π –¥–≤–∏–≥–∞—Ç–µ–ª—å: —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–æ–ª–Ω–µ—á–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–∏!",
            "üì° –õ–∞–∑–µ—Ä–Ω–∞—è —Å–≤—è–∑—å: –æ–±—â–∞–µ—Ç—Å—è —Å –ó–µ–º–ª—ë–π —Å –ø–æ–º–æ—â—å—é –ª–∞–∑–µ—Ä–∞!",
            "üó∫Ô∏è –ö–∞—Ä—Ç–æ–≥—Ä–∞—Ñ: —Å–æ—Å—Ç–∞–≤–∏—Ç –ø–µ—Ä–≤—É—é –∫–∞—Ä—Ç—É –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–æ–≥–æ –º–∏—Ä–∞!"
        ]
    },
    {
        "id": 11,
        "name": "OneWeb Launch 18",
        "date": "9 –¥–µ–∫–∞–±—Ä—è 2023",
        "time": "18:00 –ú–°–ö",
        "rocket": "–°–æ—é–∑-2.1–±",
        "company": "–†–æ—Å–∫–æ—Å–º–æ—Å/OneWeb",
        "status": "–ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–π",
        "description": "–ó–∞–ø—É—Å–∫ 36 —Å–ø—É—Ç–Ω–∏–∫–æ–≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–≤—è–∑–∏ OneWeb",
        "fun_fact": "üõ∞Ô∏è –°–æ–∑–¥–∞–¥—É—Ç –≥–ª–æ–±–∞–ª—å–Ω—É—é —Å–µ—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –¥–ª—è –æ—Ç–¥–∞–ª—ë–Ω–Ω—ã—Ö —Ä–∞–π–æ–Ω–æ–≤! üåê –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–ª—è –≤—Å–µ—Ö –Ω–∞ –ó–µ–º–ª–µ!",
        "importance": "–û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º —Ç—Ä—É–¥–Ω–æ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤",
        "image": "sojuz.png",
        "video": "https://www.youtube.com/embed/",
        "emoji": "üåê",
        "difficulty": "—Å—Ä–µ–¥–Ω–∏–π",
        "kid_facts": [
            "üåç –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å–µ—Ç—å: –ø–æ–∫—Ä–æ–µ—Ç –≤—Å—é –ó–µ–º–ª—é –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º!",
            "üèîÔ∏è –ü–æ–º–æ—â–Ω–∏–∫: –ø–æ–º–æ–∂–µ—Ç –¥–µ—Ç—è–º –≤ –≥–æ—Ä–∞—Ö —É—á–∏—Ç—å—Å—è –æ–Ω–ª–∞–π–Ω!",
            "üõ∞Ô∏è –ö–æ–º–∞–Ω–¥–∞: 36 —Å–ø—É—Ç–Ω–∏–∫–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ –∫–∞–∫ –∫–æ–º–∞–Ω–¥–∞!",
            "üîß –†–µ–º–æ–Ω—Ç–Ω–∏–∫: —É–º–µ–µ—Ç —Å–∞–º —á–∏–Ω–∏—Ç—å –Ω–µ–ø–æ–ª–∞–¥–∫–∏!",
            "üì∂ –°–∏–≥–Ω–∞–ª: –ø–µ—Ä–µ–¥–∞—ë—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–∞–∂–µ –Ω–∞ –°–µ–≤–µ—Ä–Ω–æ–º –ø–æ–ª—é—Å–µ!"
        ]
    },
    {
        "id": 12,
        "name": "DART - –∑–∞—â–∏—Ç–∞ –ó–µ–º–ª–∏",
        "date": "24 –Ω–æ—è–±—Ä—è 2021",
        "time": "09:21 –ú–°–ö",
        "rocket": "Falcon 9",
        "company": "NASA",
        "status": "–∑–∞–≤–µ—Ä—à—ë–Ω",
        "description": "–ò—Å–ø—ã—Ç–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∑–∞—â–∏—Ç—ã –ó–µ–º–ª–∏ –æ—Ç –∞—Å—Ç–µ—Ä–æ–∏–¥–æ–≤",
        "fun_fact": "üõ°Ô∏è –í—Ä–µ–∑–∞–ª—Å—è –≤ –∞—Å—Ç–µ—Ä–æ–∏–¥, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –µ–≥–æ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é! üéØ –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∑–∞—â–∏—Ç–Ω–∏–∫ –ó–µ–º–ª–∏!",
        "importance": "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞–Ω–µ—Ç–∞—Ä–Ω–æ–π –∑–∞—â–∏—Ç—ã",
        "image": "falcon9.png",
        "video": "https://www.youtube.com/embed/",
        "emoji": "üõ°Ô∏è",
        "difficulty": "—Å–ª–æ–∂–Ω—ã–π",
        "kid_facts": [
            "üí• –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π —Ñ—É—Ç–±–æ–ª–∏—Å—Ç: —É–¥–∞—Ä–∏–ª –ø–æ –∞—Å—Ç–µ—Ä–æ–∏–¥—É –∫–∞–∫ –ø–æ –º—è—á—É! ‚öΩ",
            "üéØ –°–Ω–∞–π–ø–µ—Ä: –ø–æ–ø–∞–ª –≤ —Ü–µ–ª—å —Ä–∞–∑–º–µ—Ä–æ–º —Å —Ñ—É—Ç–±–æ–ª—å–Ω–æ–µ –ø–æ–ª–µ!",
            "üì∏ –§–æ—Ç–æ–≥—Ä–∞—Ñ-—Å–≤–∏–¥–µ—Ç–µ–ª—å: —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—é—â–∏–π —Å–ø—É—Ç–Ω–∏–∫ —Å–¥–µ–ª–∞–ª —Ñ–æ—Ç–æ —É–¥–∞—Ä–∞!",
            "üåç –ó–∞—â–∏—Ç–Ω–∏–∫: —Ç—Ä–µ–Ω–∏—Ä—É–µ—Ç—Å—è —Å–ø–∞—Å–∞—Ç—å –ó–µ–º–ª—é –æ—Ç –æ–ø–∞—Å–Ω–æ—Å—Ç–∏!",
            "üöÄ –ë—ã—Å—Ç—Ä—ã–π: –ª–µ—Ç–µ–ª —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é 24 000 –∫–º/—á!"
        ]
    }
]

# –î–æ—Å—Ç—É–ø–Ω—ã–µ –∞–≤–∞—Ç–∞—Ä–∫–∏
AVATARS = [
    {"id": "astronaut", "emoji": "üë®‚ÄçüöÄ", "name": "–ö–æ—Å–º–æ–Ω–∞–≤—Ç"},
    {"id": "alien", "emoji": "üëΩ", "name": "–ò–Ω–æ–ø–ª–∞–Ω–µ—Ç—è–Ω–∏–Ω"},
    {"id": "rocket", "emoji": "üöÄ", "name": "–†–∞–∫–µ—Ç–∞"},
    {"id": "robot", "emoji": "ü§ñ", "name": "–†–æ–±–æ—Ç"},
    {"id": "planet", "emoji": "ü™ê", "name": "–ü–ª–∞–Ω–µ—Ç–∞"},
    {"id": "star", "emoji": "‚≠ê", "name": "–ó–≤–µ–∑–¥–∞"},
    {"id": "comet", "emoji": "‚òÑÔ∏è", "name": "–ö–æ–º–µ—Ç–∞"},
    {"id": "satellite", "emoji": "üõ∞Ô∏è", "name": "–°–ø—É—Ç–Ω–∏–∫"}
]

# –•—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–æ–ª–Ω—ã–º –ø—Ä–æ—Ñ–∏–ª–µ–º
user_profiles = {}


# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Å—Å–∏–∏
@app.before_request
def init_user():
    if 'user_id' not in session:
        session['user_id'] = str(uuid.uuid4())
        session['stars'] = 0

        # –°–æ–∑–¥–∞–µ–º –ø–æ–ª–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å
        user_profiles[session['user_id']] = {
            'stars': 0,
            'level': 1,
            'exp': 0,
            'next_level_exp': 100,
            'games_played': 0,
            'rockets_studied': 0,
            'colorings_done': 0,
            'missions_watched': 0,
            'builds_completed': 0,
            'badges': [],
            'activities': [],
            'avatar': 'astronaut',  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–æ—Å–º–æ–Ω–∞–≤—Ç
            'name': '–ö–æ—Å–º–æ–Ω–∞–≤—Ç',  # –ò–º—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            'created_at': datetime.now().isoformat(),
            'last_active': datetime.now().isoformat(),
            'studied_parts': [],  # –ù–æ–≤–æ–µ –ø–æ–ª–µ: –∏–∑—É—á–µ–Ω–Ω—ã–µ —á–∞—Å—Ç–∏ —Ä–∞–∫–µ—Ç
            'favorites': [],  # –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –º–∏—Å—Å–∏–∏
            'awarded_missions': []  # –ú–∏—Å—Å–∏–∏, –∑–∞ –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –ø–æ–ª—É—á–µ–Ω—ã –∑–≤—ë–∑–¥—ã
        }

    # –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
    if session['user_id'] in user_profiles:
        user_profiles[session['user_id']]['last_active'] = datetime.now().isoformat()


@app.route('/')
def index():
    user_id = session.get('user_id')
    stars = 0

    if user_id and user_id in user_profiles:
        stars = user_profiles[user_id]['stars']
    else:
        stars = session.get('stars', 0)

    # –ë–ª–∏–∂–∞–π—à–∏–µ 3 –º–∏—Å—Å–∏–∏
    upcoming = [m for m in ALL_MISSIONS if m['status'] == '–ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–π'][:3]

    return render_template('index_kid.html',
                           launches=upcoming,  # 3 –±–ª–∏–∂–∞–π—à–∏–µ –º–∏—Å—Å–∏–∏
                           all_missions=ALL_MISSIONS,  # –í–°–ï –º–∏—Å—Å–∏–∏ (—É–±—Ä–∞–ª–∏ [:8])
                           user_stars=stars)

@app.route('/mission/<int:mission_id>')
def mission_detail(mission_id):
    mission = next((m for m in ALL_MISSIONS if m['id'] == mission_id), None)
    if mission:
        return render_template('mission_detail.html', mission=mission)
    return "–ú–∏—Å—Å–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞", 404


@app.route('/all_missions')
def all_missions():
    return jsonify(ALL_MISSIONS)


@app.route('/add_star', methods=['POST'])
def add_star():
    user_id = session.get('user_id')
    if not user_id or user_id not in user_profiles:
        return jsonify({'success': False, 'error': '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω'})

    try:
        data = request.get_json() or {}
        count = data.get('count', 1)
        reason = data.get('reason', '–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ')

        # –û–±–Ω–æ–≤–ª—è–µ–º –≤ –ø—Ä–æ—Ñ–∏–ª–µ
        profile = user_profiles[user_id]
        profile['stars'] += count
        profile['exp'] += count

        # –û–±–Ω–æ–≤–ª—è–µ–º –≤ —Å–µ—Å—Å–∏–∏
        session['stars'] = profile['stars']

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Ä–æ–≤–µ–Ω—å
        while profile['exp'] >= profile['next_level_exp']:
            profile['level'] += 1
            profile['exp'] -= profile['next_level_exp']
            profile['next_level_exp'] = int(profile['next_level_exp'] * 1.5)

        # –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
        activity = {
            'emoji': '‚≠ê',
            'text': f'+{count} –∑–≤–µ–∑–¥–∞: {reason}',
            'time': datetime.now().strftime('%H:%M')
        }
        if 'activities' not in profile:
            profile['activities'] = []
        profile['activities'].insert(0, activity)

        # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
        profile['activities'] = profile['activities'][:10]

        return jsonify({
            'success': True,
            'stars': profile['stars'],
            'level': profile['level'],
            'exp': profile['exp'],
            'next_level_exp': profile['next_level_exp'],
            'activity': activity
        })

    except Exception as e:
        return jsonify({'success': False, 'error': str(e)})


@app.route('/get_full_profile')
def get_full_profile():
    user_id = session.get('user_id')
    if user_id and user_id in user_profiles:
        return jsonify(user_profiles[user_id])
    return jsonify({'error': '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω'}), 404


@app.route('/update_profile', methods=['POST'])
def update_profile():
    user_id = session.get('user_id')
    if user_id and user_id in user_profiles:
        data = request.json
        for key, value in data.items():
            if key in user_profiles[user_id]:
                user_profiles[user_id][key] = value
        return jsonify({'success': True})
    return jsonify({'success': False}), 404


@app.route('/user_stats')
def user_stats():
    total_users = len(user_profiles)
    users_today = len([u for u in user_profiles.values()
                       if datetime.fromisoformat(u['created_at']).date() == datetime.now().date()])
    top_stars = max([u['stars'] for u in user_profiles.values()], default=0)

    return jsonify({
        'total_users': total_users,
        'users_today': users_today,
        'top_stars': top_stars
    })


@app.route('/rocket_images')
def rocket_images():
    images = []
    rockets_dir = 'static/images/rockets'
    if os.path.exists(rockets_dir):
        for file in os.listdir(rockets_dir):
            if file.endswith('.png'):
                images.append({
                    'name': file.replace('.png', ''),
                    'path': f'/static/images/rockets/{file}'
                })
    return jsonify(images)


@app.route('/available_avatars')
def available_avatars():
    return jsonify(AVATARS)


@app.route('/update_avatar', methods=['POST'])
def update_avatar():
    user_id = session.get('user_id')
    if user_id and user_id in user_profiles:
        data = request.json
        avatar = data.get('avatar')
        if avatar:
            user_profiles[user_id]['avatar'] = avatar
            return jsonify({'success': True, 'avatar': avatar})
    return jsonify({'success': False}), 404


@app.route('/update_name', methods=['POST'])
def update_name():
    user_id = session.get('user_id')
    if user_id and user_id in user_profiles:
        data = request.json
        name = data.get('name', '').strip()[:20]  # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É
        if name:
            user_profiles[user_id]['name'] = name
            return jsonify({'success': True, 'name': name})
    return jsonify({'success': False}), 404


@app.route('/games')
def games_page():
    return render_template('games.html')


@app.route('/get_coloring_images')
def get_coloring_images():
    coloring_images = []

    # –ü–∞–ø–∫–∏ —Å —Ä–∞—Å–∫—Ä–∞—Å–∫–∞–º–∏ –∏ –∏—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    categories = [
        {'id': 'aliens', 'name': '–ò–Ω–æ–ø–ª–∞–Ω–µ—Ç—è–Ω–µ', 'emoji': 'üëΩ'},
        {'id': 'astronauts', 'name': '–ö–æ—Å–º–æ–Ω–∞–≤—Ç—ã', 'emoji': 'üë®‚ÄçüöÄ'},
        {'id': 'planets', 'name': '–ü–ª–∞–Ω–µ—Ç—ã', 'emoji': 'ü™ê'},
        {'id': 'rockets', 'name': '–†–∞–∫–µ—Ç—ã', 'emoji': 'üöÄ'},
        {'id': 'stars', 'name': '–ó–≤—ë–∑–¥—ã', 'emoji': '‚≠ê'}
    ]

    for category in categories:
        category_path = os.path.join('static', 'coloring', category['id'])
        if os.path.exists(category_path):
            images = []
            # –ò—â–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ
            for file in sorted(os.listdir(category_path)):
                file_lower = file.lower()
                if file_lower.endswith(('.png', '.jpg', '.jpeg', '.gif', '.webp')):
                    # –°–æ–∑–¥–∞–µ–º –∫—Ä–∞—Å–∏–≤–æ–µ –∏–º—è –∏–∑ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
                    name_parts = file.split('_')
                    if len(name_parts) > 1 and name_parts[-1].replace('.png', '').replace('.jpg', '').isdigit():
                        # –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–æ–º–µ—Ä, —É–±–∏—Ä–∞–µ–º –µ–≥–æ
                        name = ' '.join(name_parts[:-1])
                    else:
                        name = file.split('.')[0]

                    name = name.replace('_', ' ').title()

                    images.append({
                        'filename': file,
                        'path': f'/static/coloring/{category["id"]}/{file}',
                        'category': category['id'],
                        'name': name
                    })

            if images:
                coloring_images.append({
                    'category': category['id'],
                    'name': category['name'],
                    'emoji': category['emoji'],
                    'images': images[:10]  # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–æ 10 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                })

    return jsonify(coloring_images)


@app.route('/coloring_page')
def coloring_page():
    return render_template('coloring_page.html')


@app.route('/coloring_gallery')
def coloring_gallery():
    return render_template('coloring_gallery.html')


@app.route('/test_images')
def test_images():
    """–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π"""
    import os
    images = []

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –ø–∞–ø–∫–∏
    categories = ['aliens', 'astronauts', 'planets', 'rockets', 'stars']

    for category in categories:
        category_path = os.path.join('static', 'coloring', category)
        if os.path.exists(category_path):
            files = os.listdir(category_path)
            images.append({
                'category': category,
                'exists': True,
                'files': files,
                'count': len(files)
            })
        else:
            images.append({
                'category': category,
                'exists': False,
                'files': [],
                'count': 0
            })

    return jsonify(images)

@app.route('/build_rocket')
def build_rocket_game():
    return render_template('build_rocket.html')

@app.route('/fly_to_moon')
def fly_to_moon_game():
    return render_template('fly_to_moon.html')

@app.route('/memory_game')
def memory_game():
    return render_template('memory_game.html')

@app.route('/planets_puzzle')
def planets_puzzle():
    return render_template('planets_puzzle.html')

@app.route('/space_math')
def space_math():
    return render_template('space_math.html')

if __name__ == '__main__':
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–∞–ø–æ–∫
    import os

    categories = ['aliens', 'astronauts', 'planets', 'rockets', 'stars']

    for category in categories:
        category_path = os.path.join('static', 'coloring', category)
        if not os.path.exists(category_path):
            print(f"‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –ü–∞–ø–∫–∞ {category_path} –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!")
            print(f"   –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –∏ –¥–æ–±–∞–≤—å—Ç–µ —Ç—É–¥–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (alien_1.png –∏ —Ç.–¥.)")

    app.run(debug=True, port=5000)